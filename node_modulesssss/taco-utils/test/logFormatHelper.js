// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license. See LICENSE file in the project root for details.
/// <reference path="../../typings/node.d.ts"/>
/// <reference path="../../typings/should.d.ts"/>
/// <reference path="../../typings/mocha.d.ts"/>
"use strict";
var os = require("os");
var should = require("should");
var logFormathelper = require("../logFormatHelper");
var LogFormatHelper = logFormathelper.LogFormatHelper;
describe("logFormathelper", function () {
    // Sample input string expanded...
    //  <error>The </error>
    //  <warn> quick <br/>
    //  <link>brown </link>
    //  fox
    //  <title> jumps
    //  <link> over </link> the
    //  </title>
    //  lazy
    //  </warn>
    //  <success> dog
    //  <key> </key>
    //  </success>.
    //  <key> The </key>
    //  <highlight>
    //  <helptitle>quick <br/>brown </helptitle>
    //  <synopsis> <br/>
    //  <kitid> fox </kitid> jumps
    //  <deprecatedkit> over </deprecatedkit>
    //  </synopsis>
    //  <defaultkit> a lazy dog</defaultkit>
    //  </highlight>
    //  <underline />
    var validInputString = "<error>The</error><warn>quick <br/><link>brown</link> fox <title>jumps <link>over </link>the </title> lazy</warn><success>dog<key></key></success>.<key>The</key> <highlight><helptitle>quick <br/>brown</helptitle> <synopsis><br/><kitid>fox</kitid> jumps<deprecatedkit> over</deprecatedkit></synopsis> <defaultkit>a lazy dog</defaultkit></highlight><underline/>";
    it("should allow all supported styles for a correctly formatted string", function () {
        var formatted = LogFormatHelper.toFormattedString(validInputString);
        should(formatted).be.not.equal(null);
    });
    it("should allow empty string", function () {
        var input = "";
        var formatted = LogFormatHelper.toFormattedString(input);
        should(formatted).be.equal(os.EOL);
        input = null;
        formatted = LogFormatHelper.toFormattedString(input);
        should(formatted).be.equal(os.EOL);
    });
    it("should allow deeply nested tags", function () {
        var input = "<error><warn><link><title><success><key><highlight><helptitle><synopsis><kitid><deprecatedkit><defaultkit>The quick brown fox jumps over a lazy dog</defaultkit></deprecatedkit></kitid></synopsis></helptitle></highlight></key></success></title></link></warn></error>";
        var formatted = LogFormatHelper.toFormattedString(input);
        should(formatted).be.not.equal(null);
    });
    it("should fail for missing helptitle start tag", function () {
        verifyFailureScenario(validInputString.replace(/<helptitle>/g, ""));
    });
    it("should fail for missing synopsis end tag", function () {
        verifyFailureScenario(validInputString.replace(/<\/synopsis>/g, ""));
    });
    it("should fail for no end tags", function () {
        verifyFailureScenario(validInputString.replace(/<\/[^>]*>/g, ""));
    });
    it("should fail for no start tags", function () {
        verifyFailureScenario(validInputString.replace(/<[^>^\/]*>/g, ""));
    });
    it("should fail for unknown tags", function () {
        verifyFailureScenario(" The quick <br/><random>brown fox </random>jumps over a lazy dog");
    });
});
function verifyFailureScenario(input) {
    try {
        var formatted = LogFormatHelper.toFormattedString(input);
        should(formatted).be.equal(null);
    }
    catch (err) {
        should(err).be.not.equal(null);
    }
}

//# sourceMappingURL=logFormatHelper.js.map
